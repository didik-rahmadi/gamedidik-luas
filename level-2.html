<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Level 2: Luas Segitiga</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">

    <style>
        /* --- BACKGROUND KHUSUS LEVEL 2 --- */
        #game-container { 
            /* Ganti dengan background pegunungan/segitiga jika ada */
            background: #A5D6A7 url('assets/bg_level2.png') no-repeat center center; 
            background-size: cover;
        }

        /* --- STYLE KHUSUS MATERI SEGITIGA --- */
        .materi-box {
            background: rgba(255, 255, 255, 0.9);
            padding: 30px; border-radius: 30px;
            width: 80%; text-align: center;
            border: 5px solid #2ecc71;
            animation: popIn 0.5s;
        }

        .rumus-area {
            background: #2c3e50; color: white;
            padding: 15px 30px; border-radius: 20px;
            font-size: 2.5rem; font-family: 'Chewy';
            display: inline-block; margin: 20px 0;
            box-shadow: 0 10px 0 rgba(0,0,0,0.2);
        }

        .visual-segitiga {
            width: 0; height: 0;
            border-left: 100px solid transparent;
            border-right: 100px solid transparent;
            border-bottom: 180px solid #e74c3c;
            margin: 0 auto; position: relative;
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.3));
        }
        
        /* Garis Tinggi & Alas */
        .line-alas { position: absolute; bottom: -40px; left: -100px; width: 200px; height: 5px; background: #333; }
        .line-tinggi { position: absolute; bottom: 0; left: 0; width: 4px; height: 180px; background: #333; border-left: 2px dashed white; }
        
        .label-text {
            position: absolute; font-family: 'Fredoka'; font-weight: bold; font-size: 1.5rem; color: #333;
        }

        /* --- GAME INPUT JAWABAN --- */
        .game-question {
            font-size: 2rem; color: #2c3e50; margin-bottom: 20px;
        }
        
        .input-jawaban {
            font-family: 'Chewy'; font-size: 3rem;
            width: 150px; text-align: center;
            border: 4px solid #2ecc71; border-radius: 15px;
            padding: 10px; color: #27ae60;
            outline: none;
        }
        .input-jawaban:focus { box-shadow: 0 0 20px #2ecc71; }

        .btn-check {
            background: #2ecc71; color: white; border: 4px solid white;
            padding: 10px 40px; border-radius: 50px; font-family: 'Chewy'; font-size: 2rem;
            margin-top: 20px; cursor: pointer; box-shadow: 0 8px 0 #27ae60;
        }
        .btn-check:active { transform: translateY(4px); box-shadow: none; }

    </style>
</head>
<body>

    <div id="game-container">
        
        <button class="btn-back-map" onclick="attemptExit()">â¬… PETA</button>

        <div id="slide-1" class="slide-section" style="display:flex; justify-content:center; align-items:center;">
            <div class="materi-box">
                <h1 class="level-title" style="color:#27ae60;">LUAS SEGITIGA</h1>
                
                <div style="display: flex; align-items: center; justify-content: center; gap: 50px; margin-top: 30px;">
                    <div style="position: relative; margin-bottom: 40px;">
                        <div class="visual-segitiga">
                            <div class="line-tinggi"></div>
                            <div class="line-alas"></div>
                        </div>
                        <div class="label-text" style="bottom: -70px; width: 100%; text-align: center;">Alas (a)</div>
                        <div class="label-text" style="left: 10px; top: 80px;">Tinggi (t)</div>
                    </div>

                    <div style="text-align: left; max-width: 400px;">
                        <p style="font-size: 1.8rem; color: #555;">Untuk menghitung daerah Segitiga, kita gunakan rumus:</p>
                        <div class="rumus-area">
                            L = &frac12; &times; a &times; t
                        </div>
                        <p style="font-size: 1.5rem; color: #7f8c8d;">(Setengah dikali Alas dikali Tinggi)</p>
                    </div>
                </div>

                <button class="btn-next-slide" onclick="nextSlide(1)" style="font-size: 2rem; padding: 10px 50px; border-radius: 50px; margin-top: 20px; cursor: pointer;">LANJUT âž¡</button>
            </div>
        </div>

        <div id="slide-2" class="slide-section hidden" style="display:flex; justify-content:center; align-items:center;">
            <div class="materi-box" style="border-color: #e67e22;">
                <h1 class="level-title" style="color:#d35400;">TANTANGAN!</h1>
                
                <div class="game-question">
                    Diketahui sebuah segitiga memiliki:<br>
                    <b>Alas = 10 cm</b> dan <b>Tinggi = 8 cm</b>.<br>
                    Berapakah luasnya?
                </div>

                <div style="margin: 20px 0;">
                    <img src="assets/segitiga_soal.png" alt="Segitiga a=10 t=8" style="height: 150px; object-fit: contain;">
                    <div style="font-size: 1.2rem; color: #999;">(Bayangkan Segitiga a=10, t=8)</div>
                </div>

                <div style="display: flex; justify-content: center; align-items: center; gap: 10px;">
                    <span style="font-size: 2.5rem; font-family: 'Chewy';">Jawab:</span>
                    <input type="number" id="input-jawaban" class="input-jawaban" placeholder="?">
                    <span style="font-size: 2.5rem; font-family: 'Chewy';">cmÂ²</span>
                </div>

                <button class="btn-check" onclick="checkAnswer()">CEK JAWABAN</button>
                
                <div id="feedback-msg" style="font-family:'Chewy'; font-size: 2rem; margin-top: 15px; min-height: 40px;"></div>
            </div>
        </div>

        <div id="modal-success" class="modal-overlay hidden">
            <div class="modal-box">
                <h1 class="modal-title" style="color: #2ecc71;">LUAR BIASA! ðŸŒŸ</h1>
                <p class="modal-text">
                    Jawabanmu Benar!<br>
                    Luas = &frac12; &times; 10 &times; 8 = <b>40</b>
                </p>
                <button class="btn-modal btn-next-slide" onclick="finishGame()">LANJUT LEVEL 3 â–¶</button>
            </div>
        </div>

        <div id="modal-exit" class="modal-overlay hidden">
            <div class="modal-box" style="border-color: #e74c3c;">
                <h1 class="modal-title" style="color: #c0392b;">KELUAR? ðŸšª</h1>
                <p class="modal-text">Progres di level ini tidak akan tersimpan.</p>
                <button class="btn-modal btn-confirm-no" onclick="closeExitModal()">BATAL</button>
                <button class="btn-modal btn-confirm-yes" onclick="forceExit()">YA</button>
            </div>
        </div>

    </div>

    <script src="game-engine.js"></script>

    <script>
        // --- LOGIKA LOKAL ---
        
        function nextSlide(current) {
            document.getElementById(`slide-${current}`).classList.add('hidden');
            document.getElementById(`slide-${current + 1}`).classList.remove('hidden');
        }

        function checkAnswer() {
            const input = document.getElementById('input-jawaban').value;
            const feedback = document.getElementById('feedback-msg');
            
            if (input == 40) {
                // BENAR
                feedback.innerHTML = "BENAR! ðŸŽ‰";
                feedback.style.color = "#27ae60";
                
                // Putar suara menang jika ada (opsional)
                // document.getElementById('sfx-win').play();

                setTimeout(() => {
                    document.getElementById('modal-success').classList.remove('hidden');
                }, 1000);
            } else {
                // SALAH
                feedback.innerHTML = "Masih kurang tepat, coba lagi! ðŸ’ª";
                feedback.style.color = "#c0392b";
                
                // Efek goyang input
                const inputEl = document.getElementById('input-jawaban');
                inputEl.style.borderColor = "#c0392b";
                setTimeout(() => inputEl.style.borderColor = "#2ecc71", 500);
            }
        }

        function finishGame() {
            // Panggil fungsi global saveAndExit (dari game-engine.js)
            // Parameter '3' artinya kita ingin membuka level 3 setelah ini
            saveAndExit(3); 
        }

        // Navigasi Modal
        function attemptExit() { document.getElementById('modal-exit').classList.remove('hidden'); }
        function closeExitModal() { document.getElementById('modal-exit').classList.add('hidden'); }
        
        // forceExit sudah ada di game-engine.js, otomatis jalan.
    </script>
</body>
</html>
